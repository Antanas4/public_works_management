<span class="section-label">{{'processingHistory'}}</span>

@if (processingActions && processingActions.length > 0) {
  <div class="processing-history-section">
    <div class="action-timeline">
      @for (action of processingActions; track action; let processingActionIndex = $index) {
        <div class="action-item">
          <div class="action-header">
            <div class="action-info">
              <span class="action-number">#{{ processingActionIndex + 1 }}</span>
              <span class="action-status" [ngClass]="action.status.toLowerCase()">
                {{ action.status | capitalize | removeUnderscores }}
              </span>
            </div>
            <div class="action-dates">
              @if (action.createdAt) {
                <span class="action-date-value">
                  {{ action.createdAt | date:'medium' }}
                </span>
              }
            </div>
          </div>
          @if (action.parameters) {
            <div class="parameters-section">
              @if (action.status === ActionStatus.DATA_PROVIDED) {
                @for (param of action.parameters | keyvalue; track param) {
                  @if (param.key !== 'description') {
                    <div class="parameter-item">
                      <span class="parameter-key">{{ param.key | camelCaseToTitle }}:</span>
                      <span class="parameter-value">{{ param.value }}</span>
                    </div>
                  }
                }
              }
              @if (action.status === ActionStatus.IN_PROGRESS) {
                @if (action.parameters.actionType) {
                  <div class="parameter-item">
                    <span class="parameter-action">{{ getFriendlyActionName(action.parameters.actionType) }}</span>
                  </div>
                }
              }
            </div>
          }
        </div>
      }
    </div>
  </div>
} @else {
  @if (processingHistoryNotFound) {
    <div class="no-comments-message">
      <em>No processing history found.</em>
    </div>
  }
}

